## 配置方法

1. 配置环境变量 `ISUDA_TAKEOVER_RUNTIME_ACL=true` 开启可配置发布环境权限接管
2. 来到 `应用 -> 应用设置 -> 权限接管接口` 配置权限接管接口，可配置权限点缓存时间用于调试

### 权限接管接口

接口请求参数：

- `appKey`：应用 key
- `userEmail`：用户邮箱
- `env`：当前环境，可选：qa、sandbox、latest

接口返回：

- `perms`：页面权限点数组，权限点格式是：
  - 页面的权限点：`「page:pageId:aclValue」`
    - `pageId`：页面的 hashId
    - `aclValue`：具体的权限能力点，例如：read、print、api:xxx:call 等
  - 应用的权限点：`「app:appKey:aclValue」`
    - `appKey`：app 的 key
    - `aclValue`：具体的权限能力点，例如：read、edit、dataManage

备注：

1. 支持以 `.` 为分隔符
2. 支持 `*` 通配符的能力 类似 `app:877f21d1cc5a:*` 会递归，甚至可以支持根节点
3. 权限点和描述必须要有

例如一个页面可能包含的权限点如下：

```json
{
  "perms": [
    "app.877f21d1cc5a.read", // 应用发布环境的访问权限
    "app.877f21d1cc5a.edit", // 应用发布环境的管理权限
    "app.877f21d1cc5a.dataManage", // 应用发布环境的数据管理

    "page.4Qyw7pEgGd.read", // 页面的可读权限
    "page.4Qyw7pEgGd.print", // 比如添加了一个自定义权限标识为「print」
    "page.4Qyw7pEgGd.export", // 比如添加了一个自定义权限标识为「export」

    // 页面内api的调用权限
    "page.4Qyw7pEgGd.api.2iowtJ2eJUyBxj6HTSxSjW.call", // "2iowtJ2eJUyBxj6HTSxSjW" 为页面内 api 的 key
    "page.4Qyw7pEgGd.api.muEb9u9DdpbaGiFMhWqdjm.    call" // "muEb9u9DdpbaGiFMhWqdjm" 为页面内 api 的 key
  ]
```


可以通过 openApi:

- 获取页面相关权限信息：[接口](../OpenAPI/%E5%BA%94%E7%94%A8.md)
- 获取应用下可配置权限点：[接口](../OpenAPI/%E5%BA%94%E7%94%A8.md#%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%AA%E5%BA%94%E7%94%A8%E5%8F%AF%E9%85%8D%E7%BD%AE%E7%9A%84%E6%9D%83%E9%99%90%E7%82%B9)
